sudo: required
dist: trusty
language: python

python:
  - "3.3"
  - "3.4"

# For Ubuntu, in general the following packages are needed (for Python 3): 
# swig libeigen3-dev python3-dev python3-numpy python3-nose python3-setuptools 
# build-essential libboost-all-dev python3-pip
# Most of these should come with the Travis install.

before_install:
  - grep deb /etc/apt/sources.list
  - echo "deb http://archive.ubuntu.com/ubuntu trusty-backports main restricted universe multiverse" | sudo tee -a /etc/apt/sources.list
  - sudo apt-get -qq update
  - sudo apt-get install -y swig3.0 libeigen3-dev libboost-all-dev
  - pip install --upgrade pip setuptools # Upgrade pip and setuptools to get ones with `wheel` support
  - pip install numpy nose transforms3d
  - pip --version
  - export CPLUS_INCLUDE_PATH="$CPLUS_INCLUDE_PATH:/usr/include/eigen3"
install:
  - swig3.0 -version
  - make SWIGBIN=swig3.0 all wraps
  - sed -i 's/<:/< :/g' pyparm/sim_wrap*.cxx # fix digraph issue. This is fixed in newer versions of swig (>3.0.2)
  - python setup.py build_ext --inplace
script:
  - nosetests .
